!function(e,t){"use strict";if("function"!=typeof Object.create&&(Object.create=function(){var e=function(){};return function(t){if(arguments.length>1)throw Error("Second argument not supported");if(t!==Object(t)&&null!==t)throw TypeError("Argument must be an object or null");if(null===t)throw Error("null [[Prototype]] not supported");e.prototype=t;var r=new e;return e.prototype=null,r}}()),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=this,r=Array.prototype.slice.call(arguments,1),n=function(){},i=function(){t.apply(this instanceof n?this:e,r.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),i.prototype=new n,i}),"undefined"==typeof e.Promise||e.debugPromise){var n=function(){function e(e){return null!==e&&"function"==typeof e}function n(e){return null!==e&&"object"==typeof e&&"undefined"!==e._promiseState}function i(e,t){this._capabilities=e,this._handler=t}function o(e,t,r){this._promise=e,this._resolve=t,this._reject=r}function u(e){this._iterator=e,this._done=!1}function a(){var e=window.setImmediate&&window.setImmediate.bind(window),t=window.clearImmediate&&window.clearImmediate.bind(window);S.call(this,e,t)}function s(){var e,r;if(window.postMessage&&!window.importScripts){var n=1,i={},o="setImmediate$"+Math.random()+"$";e=function(e){var r=Array.prototype.slice.call(arguments,1);i[n]=function(){"function"==typeof e?e.apply(t,r):new Function(""+e)()};var u=n++;return window.postMessage(o+u,"*"),u},r=function(e){delete i[e]};var u=function(e){if(e.source==window&&"string"==typeof e.data&&0===e.data.indexOf(o)){var t=+e.data.slice(o.length),n=i[t];if(n)try{n()}finally{r(t)}}};window.addEventListener?window.addEventListener("message",u,!1):window.attachEvent("onmessage",u)}S.call(this,e,r)}function c(){var e=window.msSetImmediate&&window.msSetImmediate.bind(window),t=window.msClearImmediate&&window.msClearImmediate.bind(window);S.call(this,e,t)}function l(){var e=window.setTimeout&&window.setTimeout.bind(window),t=window.clearTimeout&&window.clearTimeout.bind(window);S.call(this,e,t)}function p(e,r){if(e instanceof i){var n=e._capabilities,o=e._handler,u=null,a=null;try{u=o===I.identity?r:o.call(t,r),a=n._resolve(u)}catch(s){a=n._reject.call(t,s)}}}function f(e,r,n){for(var i=[],o={_value:1},u=0;e._iterator.next();){var a=e._iterator.getCurrent();i.push(t);var s=r.resolve(a),c=b({_value:!1},u,i,n,o);o._value=o._value+1;s.then(c,n._reject);u+=1}return e._done=!0,o._value=o._value-1,0===o._value&&n._resolve.call(t,i),n._promise}function d(t,r,n,o){e(r)||(r=I.identity),e(n)||(n=I.thrower);var u=new i(o,r),a=new i(o,n);if(t._promiseState===T.pending)t._promiseFulfillReactions.push(u),t._promiseRejectReactions.push(a);else if(t._promiseState===T.fulfilled){var s=t._promiseResult;F.enqueue("PromiseJobs",p,[u,s])}else if(t._promiseState===T.rejected){var c=t._promiseResult;F.enqueue("PromiseJobs",p,[a,c])}return o._promise}function _(e){function t(e,r){var n=t._capability;if(n instanceof o){if("undefined"!=typeof n._resolve)throw new TypeError;if("undefined"!=typeof n._reject)throw new TypeError;n._resolve=e,n._reject=r}}return t._capability=e,t}function h(t){var r=new o,n=_(r),i=new t(n);if(!e(r._resolve))throw new TypeError;if(!e(r._reject))throw new TypeError;return r._promise=i,r}function y(e,r,n){var i=E(e);try{var o=n.call(r,[i._resolve,i._reject])}catch(u){i._reject.call(t,o)}}function w(e,r){for(var n=0,i=e.length;i>n;n++)F.enqueue("PromiseJobs",p,[e[n],r]);return t}function v(e,r){var n=e._promiseFulfillReactions;return e._promiseResult=r,e._promiseFulfillReactions=t,e._promiseRejectReactions=t,e._promiseState=T.fulfilled,w(n,r)}function m(e,r){var n=e._promiseRejectReactions;return e._promiseResult=r,e._promiseFulfillReactions=t,e._promiseRejectReactions=t,e._promiseState=T.rejected,w(n,r)}function b(e,r,n,i,o){var u=function(e){var r=u._alreadyCalled;if(r._value)return t;r._value=!0;var n=u._index,i=u._values,o=u._capabilities,a=u._remainingElements;return i[n]=e,a._value=a._value-1,0==a._value?o._resolve(i):t};return u._alreadyCalled=e,u._index=r,u._values=n,u._capabilities=i,u._remainingElements=o,u}function g(r,n){var i=function(r){var n=i._promise,o=i._alreadyResolved;if(o._value)return t;if(o._value=!0,r===n)return m(n,new TypeError);if("object"!=typeof r)return v(n,r);var u;try{u=r.then}catch(a){return m(n,u)}return e(u)?(F.enqueue("PromiseJobs",y,[n,r,u]),t):v(n,r)};return i._promise=r,i._alreadyResolved=n,i}function j(e,r){var n=function(e){var r=n._promise,i=n._alreadyResolved;return i._value?t:(i._value=!0,m(r,e))};return n._promise=e,n._alreadyResolved=r,n}function E(e){var t={_value:!1},r=g(e,t),n=j(e,t);return{_resolve:r,_reject:n}}function R(e,r){try{e()}catch(n){try{var i=r._reject.call(t,n);return i}catch(o){return r._promise}}}function x(e){if("function"!=typeof e)throw new TypeError("Promise resolver must be function");this._promiseState=T.pending,this._promiseResult=t,this._promiseFulfillReactions=[],this._promiseRejectReactions=[];var r=E(this);try{var n=e.call(t,r._resolve,r._reject)}catch(i){r._reject.call(t,n)}}var T={pending:"pending",fulfilled:"fulfilled",rejected:"rejected"},I={identity:function(e){return e},thrower:function(e){throw e}},q=function(){function e(e){if(this._index=t,!e||"undefined"==typeof e.length)throw new TypeError("Invalid iterable");this.length=(this._iterable=e).length}return e.prototype.next=function(e){return this._index="undefined"!=typeof this._index?this._index+1:0,this._index<this.length},e.prototype.getCurrent=function(){return this._iterable[this._index]},e.prototype.reset=function(){this._index=0},e}(),S=function(e){function t(e,t,r){this.name=e,this.action=t,this.args=r}function r(e,t,r){"undefined"===r&&(r=100),this._run=e,this._clear=t,this._queue=new Array(r),this._queueIds=new Array(r),this._length=0}return t.prototype.execute=function(){this.action.apply(e,this.args)},r.prototype.isSupported=function(){return"undefined"!=typeof this._queue&&"undefined"!=typeof this._run&&"undefined"!=typeof this._clear},r.prototype.enqueue=function(e,r,n){if(!this.isSupported())throw new TypeError;if("function"!=typeof r)throw new TypeError("Unexpected action value. Expected type: function");if(null!=typeof n&&("object"!=typeof n||"undefined"==typeof n.length))throw new TypeError("Unexpected args value. Expected type: Array, null or undefined");this._queue[this._length]=new t(e,r,n),this._queueIds[this._length++]=this._run(this._process.bind(this),0)},r.prototype._process=function(){for(var e=0;e<this._length;e++)this._execute(e),this._remove(e);this._length=0},r.prototype._execute=function(e){this._queue[e].execute()},r.prototype._remove=function(t){this._clear(this._queueIds[t]),this._queue[t]=e,this._queueIds[t]=e},r}();a.prototype=Object.create(S.prototype),s.prototype=Object.create(S.prototype),c.prototype=Object.create(S.prototype),l.prototype=Object.create(S.prototype);var P=function(){function e(){this._handlers=[a,c,s,l]}return e.prototype.createJobHandler=function(){for(var e,t=this._handlers.length,r=0;t>r;r++){var e=new this._handlers[r];if(e.isSupported())return e}throw new Error("No job handler supported.")},new e}(),F=P.createJobHandler();return x.prototype["catch"]=function(e){return x.prototype.then.call(this,null,e)},x.prototype.then=function(e,t){var r=this;if(!n(r))throw new TypeError("Invalid operation on a promise function");var i=r.constructor,o=h(i);return d(r,e,t,o)},x.all=function(e){var t,r,n,i=this,o=h(i);if(n=R(function(){r=new q(e)},o))return n;var a=new u(r);return(n=R(function(){t=f(a,i,o)},o))?n:t},x.race=function(e){throw new Error("Not Implemented")},x.reject=function(e){var n=this,i=h(n);i._reject.call(t,r);return i._promise},x.resolve=function(e){var r=this;if(n(e)){var i=e.constructor;if(r===i)return e}var o=h(r);o._resolve.call(t,e);return o._promise},x}();e.debugPromise&&(e.PromisePolyfill=n),"undefined"==typeof e.Promise&&(e.Promise=n)}}(window);